generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("AIVEN_DB_URL")
}

model DanceEvent {
  id          String   @id @default(uuid())
  name        String
  style       String[]
  date        DateTime
  country     String
  city        String
  venue       Json[]
  description Json
  sns         Json[]
  flyer       Json
}

model Users {
  id                String             @id @default(uuid())
  name              String
  email             String             @unique
  style             String[]
  country           String?
  bio               String?
  sns               SNS[]
  profilePic        Json?
  role              Role[]             @default([DANCER])
  signupProvider    SignupProvider
  createdAt         DateTime           @default(now())
  updatedAt         DateTime?
  lastLogin         DateTime?
  verificationToken VerificationToken?
  verified          Boolean            @default(false)
  preferences       Preferences?
  password          String
}

model SNS {
  id      String  @id @default(uuid())
  name    String
  faClass String
  url     String
  users   Users[]
}

model Preferences {
  id                  String  @id @default(uuid())
  userId              String  @unique
  user                Users   @relation(fields: [userId], references: [id], onDelete: Cascade)
  showAssistingEvents Boolean @default(true)
}

model VerificationToken {
  id        String   @id @default(uuid())
  token     String   @unique
  expiresAt DateTime @default(now())
  userId    String   @unique
  user      Users    @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model Session {
  id        String   @id @default(cuid())
  sid       String   @unique
  data      String
  expiresAt DateTime
}

enum Role {
  DANCER
  ARTIST
  DJ
  INSTRUCTOR
  ORGANIZER
  MEDIACREW
}

enum SignupProvider {
  LOCAL
  GOOGLE
}
